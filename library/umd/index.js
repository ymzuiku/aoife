!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).$verk=t()}(this,function(){"use strict";function e(){var e,t=this.parentNode,n=arguments.length;if(t)for(n||t.removeChild(this);n--;)"object"!=typeof(e=arguments[n])?e=this.ownerDocument.createTextNode(e):e.parentNode&&e.parentNode.removeChild(e),n?t.insertBefore(e,this.nextSibling):t.replaceChild(e,this)}void 0===HTMLElement.prototype.append&&(Element.prototype.append=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach(function(e){t.prototype.appendChild(e)})}),void 0===HTMLElement.prototype.remove&&(Element.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.parentNode&&this.prototype.parentNode.removeChild(this)}),Element.prototype.replaceWith||(Element.prototype.replaceWith=e),CharacterData.prototype.replaceWith||(CharacterData.prototype.replaceWith=e),DocumentType.prototype.replaceWith||(DocumentType.prototype.replaceWith=e);function a(e,t,n){e.__next||(e.setAttribute("data-next",t),e.__next=new Map),e.__next.set(t,n)}var i=new Set;var c={};function f(e,t){void 0===t&&(t="c");var n=c[e];if(n)return t+n;for(var r="",o=0;o<e.length;o++)""===r?r=e.charCodeAt(o).toString(36):r+=e.charCodeAt(o).toString(36);return t+(c[e]=r)}var r={autofocus:!0};function s(e){return"function"==typeof e?e():e}function u(i,t,n){return/^on/.test(t)?(i[t]=n,null):/^listen/.test(t)?(i.addEventListener(t.replace("listen",""),n),null):((e=r[t]||/-/.test(t)?function(){var e=s(n);i.getAttribute(t)!==e&&i.setAttribute(t,e)}:"style"===t?(void 0===i.className&&(i.className=" "),function(){var t=s(n);t&&("string"!=typeof t?Object.keys(t).forEach(function(e){/-/.test(e)?i.style.setProperty(e,t[e]):i.style[e]=t[e]}):i.style.cssText=t)}):"className"===t?function(){var e=s(n);Array.isArray(e)&&(e=e.join(" ")),i.className!==e&&(i.className=e)}:"classPick"===t?(void 0===i.className&&(i.className=" "),function(){var o=s(n);o&&(Object.keys(o).forEach(function(e){var t=o[e],n=f(e);if(i.__isFirstClassPick){var r=void 0;(r=t?i.className.replace(n,e):i.className.replace(e,n))!==i.className&&(i.className=r)}else i.className+=" "+(t?e:n)+" "}),i.__isFirstClassPick=!0)}):function(){var e=s(n);i[t]!==e&&(i[t]=e)})(),"function"!=typeof n?null:e);var e}var l={};function p(e){var t=Object.prototype.toString.call(e);if("[object String]"===t||"[object Number]"===t)return!0}function d(e){return 0<Object.prototype.toString.call(e).indexOf("lement")}function y(e,t){e.replaceWith(t)}function v(i,a){void 0===a&&(a=300);var c=0;return new Promise(function(t,n){var r;r="string"==typeof i?function(){return document.querySelector(i)}:function(){if(document.body.contains(i))return i};var o=function(){var e=r();e?t(e):c<a?(c++,requestAnimationFrame(o)):n(i)};o()})}var h={class:1,className:1,classPick:1,onsubmit:1,oncreate:1,onappend:1,child:1,children:1,length:1,__proxy:1,__proxyEle:1},m=["className","classPick"],N=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o,i={};if(t&&("function"==typeof t||Array.isArray(t)||p(t)||d(t))?n=[t].concat(n):t&&(i=t),i.children=n.slice(),i.class&&(i.className=i.class),"function"==typeof e)return e.apply(void 0,[i].concat(n));if(Array.isArray(e))return N.apply(void 0,e);if("string"==typeof e){if(l[e])return o=function(e,n,t){void 0===n&&(n=[]);var r=void 0===t?{}:t,o=r.ref,i=r.loading,a=r.defaultKey,c=void 0===a?"default":a;return i=i||document.createElement("input"),Promise.resolve(e.apply(void 0,n)).then(function(e){var t=e[c];t&&(e=t.apply(void 0,n)),"function"==typeof e&&(e=e.apply(void 0,n)),o&&o(e),i&&i.replaceWith(e)}),i}(l[e],[i].concat(n));o=document.createElement(e)}else d(e)&&(o=e);return i.onsubmit&&(o.onsubmit=function(e){e.preventDefault(),i.onsubmit&&i.onsubmit(e)}),m.forEach(function(e){if(i[e]){var t=u(o,e,i[e]);t&&a(o,e,t)}}),Object.keys(i).forEach(function(e){if(!h[e]){var t=u(o,e,i[e]);t&&a(o,e,t)}}),function(e,u){Array.isArray(e)&&e.filter(function(e){return null!=e}).forEach(function(e,f){if(p(e)){var t=document.createTextNode(e);t.key=f,u.append(t)}else if("function"==typeof e){var s=document.createTextNode("");u.append(s);var n=function(){var t=e();if(p(t)){var n=document.createTextNode(t);n.key=f;var r=!1;return u.childNodes.forEach(function(e){if(e.key===n.key){if(e.textContent===n.textContent)return void(r=!0);e.replaceWith(n),r=!0}}),r||u.insertBefore(n,s),f}if(Array.isArray(t)){var o={},i={};t.forEach(function(e,t){e.___forList=f,e.key||(e.key="fn("+f+")-list("+t+")"),i[e.key]=e});var a=[];return u.childNodes.forEach(function(e){e.___forList===f&&(i[e.key]?o[e.key]=e:a.push(e))}),a.forEach(function(e){e.remove()}),t.forEach(function(e,t){var n=o[e.key];n?n.isEqualNode(e)||y(n,e):u.insertBefore(e,s)}),"for-list-"+f}if(t){t.key||(t.key=f);var c=!1;return u.childNodes.forEach(function(e){e.key===t.key&&(y(e,t),c=!0)}),c||u.insertBefore(t,s),t.key}};n(),a(u,"childfn-"+f,n)}else d(e)?u.append(e):u.append.apply(u,e)})}(n,o),"function"==typeof i.oncreate&&i.oncreate(o),"function"==typeof i.onappend&&v(o).then(i.onappend),o};return N.jsxFrag=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error("Dont Use Frag JSX")},N.stringToHex=f,N.waitAppend=v,N.subscribe=function(e){return i.add(e),function(){i.delete(e)}},N.next=function(e,t){var n;if(t)if("string"==typeof t){var r=document.body.querySelectorAll(t);n=new Set(r)}else n=new Set(t);var o=[];e&&document.body.querySelectorAll(e+"[data-next], "+e+" [data-next]").forEach(function(e){n&&n.has(e)||e.__next&&(e.__next.forEach(function(e){e()}),o.push(e))});return i.forEach(function(e){return e()}),o},N.events=i,N.registerTag=function(t){Object.keys(t).forEach(function(e){l[e]=t[e]})},N.propFn=function(e,t){return"function"==typeof e?function(){return t(e())}:t(e)},window.aoife=N});
