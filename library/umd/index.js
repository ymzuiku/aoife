!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).$verk=t()}(this,function(){"use strict";function e(){var e,t=this.parentNode,n=arguments.length;if(t)for(n||t.removeChild(this);n--;)"object"!=typeof(e=arguments[n])?e=this.ownerDocument.createTextNode(e):e.parentNode&&e.parentNode.removeChild(e),n?t.insertBefore(e,this.nextSibling):t.replaceChild(e,this)}void 0===HTMLElement.prototype.append&&(Element.prototype.append=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach(function(e){t.prototype.appendChild(e)})}),void 0===HTMLElement.prototype.remove&&(Element.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.parentNode&&this.prototype.parentNode.removeChild(this)}),Element.prototype.replaceWith||(Element.prototype.replaceWith=e),CharacterData.prototype.replaceWith||(CharacterData.prototype.replaceWith=e),DocumentType.prototype.replaceWith||(DocumentType.prototype.replaceWith=e);function i(e,t,n){e.__next||(e.setAttribute("data-next",t),e.__next=new Map),e.__next.set(t,n)}var a=new Set;var c={};function s(e,t){void 0===t&&(t="c");var n=c[e];if(n)return t+n;for(var r="",o=0;o<e.length;o++)""===r?r=e.charCodeAt(o).toString(36):r+=e.charCodeAt(o).toString(36);return t+(c[e]=r)}var t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=0,f={},u={},p={A:"-a",B:"-b",C:"-c",D:"-d",E:"-e",F:"-f",G:"-g",H:"-h",I:"-i",J:"-j",K:"-k",L:"-l",M:"-m",N:"-n",O:"-o",P:"-p",Q:"-q",R:"-r",S:"-s",T:"-t",U:"-u",V:"-v",W:"-w",X:"-x",Y:"-y",Z:"-z"};function o(e,t,n,r){var o=s(JSON.stringify(t),n),a=f[o];!function(e){var t=e.ele,n=e.elKey,r=e.select,o=e.cssName,a=e.style,i=t[n];if(i!==o&&(i?t.classList.replace(i,o):t.classList.add(o),t[n]=o,!u[o])){var c=r+"{";Object.keys(a).forEach(function(e){0===e.indexOf("webkit")&&(e=e.replace("webkit","--webkit"));for(var t="",n=0;n<e.length;n++){var r=e[n];t+=p[r]||r}c+=t+":"+a[e]+" !important; "}),c+="}",/@media/.test(r)&&(c+="}");var s=document.createElement("style");s.id=o,s.textContent=c,u[o]=!0,document.head.appendChild(s)}}({ele:e,style:t,elKey:"__style_"+n,cssName:o=a||(l+=1,f[o]="cssinjs-"+l,f[o]),select:r(o)})}var d={onExtraSmall:"480px",onSmall:"640px",onMiddle:"720px",onLarge:"1024px",onExtraLager:"1280px"},y={onActive:":active",onFocus:":focus",onFirstChild:":first-child",onLastChild:":last-child",onBlank:":blank",onChecked:":checked",onCurrent:":current",onDisabled:":disabled",onFocusWithin:":focus-within",onInRange:":in-range",onVisited:":visited",onEven:":nth-child(even)",onOdd:":nth-child(odd)",onAfter:"::after",onBefore:"::before",onPlaceholderShown:":placeholder-shown"},v={};Object.keys(y).forEach(function(n){var r=y[n];v[n]=function(e,t){o(e,t,n,function(e){return"."+e+r})}});var h={};Object.keys(d).forEach(function(n){var r=d[n];h[n]=function(e,t){o(e,t,n,function(e){return"@media (min-width:"+r+") {."+e})}});var m={start:"flex-start",center:"center",end:"flex-end",around:"space-around",between:"space-between",evenly:"space-evenly"},x={start:"flex-start",center:"center",end:"flex_end",stretch:"stretch",baseline:"baseline"};function n(e,t){var n=t.split("-"),r=n[0],o=n[1];e.style.display="flex",e.style.justifyContent=m[r],e.style.alignItems=x[o]}var b=t({onHover:function(e,t){o(e,t,"onHover",function(e){return"@media (min-width:640px) {."+e+":hover"})}},h,v,{setRow:function(e,t){n(e,t),e.style.flexDirection="row"},setCol:function(e,t){n(e,t),e.style.flexDirection="column"},setNowrap:function(e,t){e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.style.wordBreak="break-all",e.style.textOverflow=t}}),N={autofocus:!0};function k(e){return"function"==typeof e?e():e}function g(a,t,r){return/^on/.test(t)?(a[t]=r,null):/^listen/.test(t)?(a.addEventListener(t.replace("listen",""),r),null):((e=N[t]||/-/.test(t)?function(){var e=k(r);a.getAttribute(t)!==e&&a.setAttribute(t,e)}:"style"===t?(void 0===a.className&&(a.className=" "),function(){var n=k(r);n&&("string"!=typeof n?Object.keys(n).forEach(function(e){var t=b[e];t?t(a,n[e]):/-/.test(e)?a.style.setProperty(e,n[e]):a.style[e]=n[e]}):a.style.cssText=n)}):"className"===t?function(){var e=k(r);Array.isArray(e)&&(e=e.join(" ")),a.className!==e&&(a.className=e)}:"classAdd"===t?(void 0===a.className&&(a.className=" "),function(){a.className+=" "+r}):"classReplace"===t?function(){var e=k(r);if(Array.isArray(e)){var t=a.className.replace(e[0],e[1]);t!==a.className&&(a.className=t)}else console.error("classReplace need return [string, string]")}:"classPick"===t?(void 0===a.className&&(a.className=" "),function(){var o=k(r);o&&(Object.keys(o).forEach(function(e){var t=o[e],n=s(e);if(a.__isFirstClassPick){var r=void 0;(r=t?a.className.replace(n,e):a.className.replace(e,n))!==a.className&&(a.className=r)}else a.className+=" "+(t?e:n)+" "}),a.__isFirstClassPick=!0)}):function(){var e=k(r);a[t]!==e&&(a[t]=e)})(),"function"!=typeof r?null:e);var e}var E={};function _(e){var t=Object.prototype.toString.call(e);if("[object String]"===t||"[object Number]"===t)return!0}function w(e){return 0<Object.prototype.toString.call(e).indexOf("lement")}function A(e,t){e.replaceWith(t)}function C(a,i){void 0===i&&(i=300);var c=0;return new Promise(function(t,n){var r;r="string"==typeof a?function(){return document.querySelector(a)}:function(){if(document.body.contains(a))return a};var o=function(){var e=r();e?t(e):c<i?(c++,requestAnimationFrame(o)):n(a)};o()})}var j={class:1,className:1,classAdd:1,classPick:1,classExtends:1,onsubmit:1,for:1,fixFor:1,replace:1,oncreate:1,onappend:1,child:1,children:1,length:1,__proxy:1,__proxyEle:1},S=["className","classReplace","classPick","classAdd"],O=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o,a={};if(t&&("function"==typeof t||Array.isArray(t)||_(t)||w(t))?n=[t].concat(n):t&&(a=t),a.children=n.slice(),a.class&&(a.className=a.class),"function"==typeof e)return e.apply(void 0,[a].concat(n));if(Array.isArray(e))return O.apply(void 0,e);if("string"==typeof e){if(E[e])return o=function(e,n,t){void 0===n&&(n=[]);var r=void 0===t?{}:t,o=r.ref,a=r.loading,i=r.defaultKey,c=void 0===i?"default":i;return a=a||document.createElement("input"),Promise.resolve(e.apply(void 0,n)).then(function(e){var t=e[c];t&&(e=t.apply(void 0,n)),"function"==typeof e&&(e=e.apply(void 0,n)),o&&o(e),a&&a.replaceWith(e)}),a}(E[e],[a].concat(n));o=document.createElement(e)}else w(e)&&(o=e);return a.onsubmit&&(o.onsubmit=function(e){e.preventDefault(),a.onsubmit&&a.onsubmit(e)}),S.forEach(function(e){if(a[e]){var t=g(o,e,a[e]);t&&i(o,e,t)}}),Object.keys(a).forEach(function(e){if(!j[e]){var t=g(o,e,a[e]);t&&i(o,e,t)}}),function(e,f){Array.isArray(e)&&e.filter(function(e){return null!=e}).forEach(function(e,s){if(_(e)){var t=document.createTextNode(e);t.key=s,f.append(t)}else if("function"==typeof e){var l=document.createTextNode("");f.append(l);var n=function(){var t=e();if(_(t)){var n=document.createTextNode(t);n.key=s;var r=!1;return f.childNodes.forEach(function(e){if(e.key===n.key){if(e.textContent===n.textContent)return void(r=!0);e.replaceWith(n),r=!0}}),r||f.insertBefore(n,l),s}if(Array.isArray(t)){var o={},a={};t.forEach(function(e,t){e.___forList=s,e.key||(e.key="fn("+s+")-list("+t+")"),a[e.key]=e});var i=[];return f.childNodes.forEach(function(e){e.___forList===s&&(a[e.key]?o[e.key]=e:i.push(e))}),i.forEach(function(e){e.remove()}),t.forEach(function(e,t){var n=o[e.key];n?n.isEqualNode(e)||A(n,e):f.insertBefore(e,l)}),"for-list-"+s}if(t){t.key||(t.key=s);var c=!1;return f.childNodes.forEach(function(e){e.key===t.key&&(A(e,t),c=!0)}),c||f.insertBefore(t,l),t.key}};n(),i(f,"childfn-"+s,n)}else w(e)?f.append(e):f.append.apply(f,e)})}(n,o),"function"==typeof a.oncreate&&a.oncreate(o),"function"==typeof a.onappend&&C(o).then(a.onappend),o};return O.jsxFrag=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error("Dont Use Frag JSX")},O.stringToHex=s,O.waitAppend=C,O.subscribe=function(e){return a.add(e),function(){a.delete(e)}},O.next=function(e,t){var n;if(t)if("string"==typeof t){var r=document.body.querySelectorAll(t);n=new Set(r)}else n=new Set(t);var o=[];e&&document.body.querySelectorAll(e+"[data-next], "+e+" [data-next]").forEach(function(e){n&&n.has(e)||e.__next&&(e.__next.forEach(function(e){e()}),o.push(e))});return a.forEach(function(e){return e()}),o},O.events=a,O.registerTag=function(t){Object.keys(t).forEach(function(e){E[e]=t[e]})},O.propFn=function(e,t){return"function"==typeof e?function(){return t(e())}:t(e)},O});
