!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).aoife=t()}(this,function(){"use strict";function e(){var e,t=this.parentNode,n=arguments.length;if(t)for(n||t.removeChild(this);n--;)"object"!=typeof(e=arguments[n])?e=this.ownerDocument.createTextNode(e):e.parentNode&&e.parentNode.removeChild(e),n?t.insertBefore(e,this.nextSibling):t.replaceChild(e,this)}void 0===HTMLElement.prototype.append&&(Element.prototype.append=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach(function(e){t.prototype.appendChild(e)})}),void 0===HTMLElement.prototype.remove&&(Element.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.parentNode&&this.prototype.parentNode.removeChild(this)}),Element.prototype.replaceWith||(Element.prototype.replaceWith=e),CharacterData.prototype.replaceWith||(CharacterData.prototype.replaceWith=e),DocumentType.prototype.replaceWith||(DocumentType.prototype.replaceWith=e);function a(e,t,n){e.__next||(e.setAttribute("aoife-next",""),e.__next=new Map),e.__next.set(t,n)}var r=new Set;var i={};function c(e,t){void 0===t&&(t="c");var n=i[e];if(n)return t+n;for(var r="",o=0;o<e.length;o++)""===r?r=e.charCodeAt(o).toString(36):r+=e.charCodeAt(o).toString(36);return t+(i[e]=r)}var o={autofocus:!0};function f(e,t){return"function"==typeof t?t(e):t}function s(i,t,n){return/^on/.test(t)?(i[t]=n,null):/^listen/.test(t)?(i.addEventListener(t.replace("listen",""),n),null):((e=o[t]||/-/.test(t)?function(){var e=f(i,n);i.getAttribute(t)!==e&&i.setAttribute(t,e)}:"style"===t?(void 0===i.className&&(i.className=" "),function(){var t=f(i,n);t&&("string"!=typeof t?Object.keys(t).forEach(function(e){/-/.test(e)?i.style.setProperty(e,t[e]):i.style[e]=t[e]}):i.style.cssText=t)}):"className"===t?function(){var e=f(i,n);Array.isArray(e)&&(e=e.join(" ")),i.className!==e&&(i.className=e)}:"classPick"===t?(void 0===i.className&&(i.className=" "),function(){var o=f(i,n);o&&(Object.keys(o).forEach(function(e){var t=o[e],n=c(e);if(i.__isFirstClassPick){var r=void 0;(r=t?i.className.replace(n,e):i.className.replace(e,n))!==i.className&&(i.className=r)}else i.className+=" "+(t?e:n)+" "}),i.__isFirstClassPick=!0)}):function(){var e=f(i,n);i[t]!==e&&(i[t]=e)})(),"function"!=typeof n?null:e);var e}var u={};function l(e){var t=Object.prototype.toString.call(e);if("[object String]"===t||"[object Number]"===t)return!0}function p(e){return 0<Object.prototype.toString.call(e).indexOf("lement")}function d(i,a){void 0===a&&(a=300);var c=0;return new Promise(function(t,n){var r;r="string"==typeof i?function(){return document.querySelector(i)}:function(){if(document.body.contains(i))return i};var o=function(){var e=r();e?t(e):c<a?(c++,requestAnimationFrame(o)):n(i)};o()})}var y={class:1,className:1,classPick:1,onsubmit:1,oncreate:1,onappend:1,child:1,children:1,length:1,__proxy:1,__proxyEle:1},v=["className","classPick"],h=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o,i={};if(t&&("function"==typeof t||Array.isArray(t)||l(t)||p(t))?n=[t].concat(n):t&&(i=t),i.children=n.slice(),i.class&&(i.className=i.class),"function"==typeof e)return e.apply(void 0,[i].concat(n));if(Array.isArray(e))return h.apply(void 0,e);if("string"==typeof e){if(u[e])return o=function(e,n,t){void 0===n&&(n=[]);var r=void 0===t?{}:t,o=r.ref,i=r.loading,a=r.defaultKey,c=void 0===a?"default":a;return i=i||document.createElement("input"),Promise.resolve(e.apply(void 0,n)).then(function(e){var t=e[c];t&&(e=t.apply(void 0,n)),"function"==typeof e&&(e=e.apply(void 0,n)),o&&o(e),i&&i.replaceWith(e)}),i}(u[e],[i].concat(n));o=document.createElement(e)}else p(e)&&(o=e);return i.onsubmit&&(o.onsubmit=function(e){e.preventDefault(),i.onsubmit&&i.onsubmit(e)}),v.forEach(function(e){if(i[e]){var t=s(o,e,i[e]);t&&a(o,e,t)}}),Object.keys(i).forEach(function(e){if(!y[e]){var t=s(o,e,i[e]);t&&a(o,e,t)}}),function(e,u){Array.isArray(e)&&e.filter(function(e){return null!=e}).forEach(function(e,f){if(l(e)){var t=document.createTextNode(e);t.key=f,u.append(t)}else if("function"==typeof e){var s=document.createTextNode("");u.append(s);var n=function(){var t=e();if(l(t)){var n=document.createTextNode(t);n.key=f;var r=!1;return u.childNodes.forEach(function(e){if(e.key===n.key){if(e.textContent===n.textContent)return void(r=!0);e.replaceWith(n),r=!0}}),r||u.insertBefore(n,s),f}if(Array.isArray(t)){var o={},i={};t.forEach(function(e,t){e.___forList=f,e.key||(e.key="fn("+f+")-list("+t+")"),i[e.key]=e});var a=[];return u.childNodes.forEach(function(e){e.___forList===f&&(i[e.key]?o[e.key]=e:a.push(e))}),a.forEach(function(e){e.remove()}),t.forEach(function(e,t){var n=o[e.key];n?n.isEqualNode(e)||n.replaceWith(e):u.insertBefore(e,s)}),"for-list-"+f}if(t){t.key||(t.key=f);var c=!1;return u.childNodes.forEach(function(e){e.key===t.key&&(e.replaceWith(t),c=!0)}),c||u.insertBefore(t,s),t.key}};n(),a(u,"childfn-"+f,n)}else p(e)?u.append(e):u.append.apply(u,e)})}(n,o),"function"==typeof i.oncreate&&i.oncreate(o),"function"==typeof i.onappend&&d(o).then(i.onappend),o};return h.jsxFrag=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error("Dont Use Frag JSX")},h.stringToHex=c,h.waitAppend=d,h.subscribe=function(e){return r.add(e),function(){r.delete(e)}},h.next=function(e,t){var o;if(t)if("string"==typeof t){var n=document.body.querySelectorAll(t);o=n}else o=t;var i=[];if(e){("string"!=typeof e?e:document.body.querySelectorAll(e+"[aoife-next], "+e+" [aoife-next]")).forEach(function(e){if(e.__next&&document.body.contains(e)){if(o)for(var t=o.length,n=0;n<t;n++){var r=o[n];if(r===e||r.contains(e))return}e.__next.forEach(function(e){e()}),i.push(e)}})}return r.forEach(function(e){return e()}),i},h.events=r,h.registerTag=function(t){Object.keys(t).forEach(function(e){u[e]=t[e]})},h.propFn=function(e,t){return"function"==typeof e?function(){return t(e())}:t(e)},window.aoife=h});
