var L={childList:!0,subtree:!0},m=new WeakMap,d=new WeakMap,h=new WeakMap;function g(e,n){if(m.has(e)){m.get(e).push(n);return}m.set(e,[n]);let o=new MutationObserver(t=>{if(document.contains(e)){o.disconnect();let s=m.get(e);s&&s.forEach(i=>i(e)),m.delete(e)}});o.observe(document,L)}function x(e,n){if(d.has(e)){d.get(e).push(n);return}d.set(e,[n]),g(e,()=>{let o=new MutationObserver(()=>{if(!document.contains(e)){o.disconnect();let t=d.get(e);t&&t.forEach(s=>s(e)),d.delete(e)}});o.observe(document,L)})}var A=(e,n,{minHeight:o="50px",root:t}={})=>{if(h.has(e)){h.get(e).push(n);return}h.set(e,[n]),g(e,()=>{if(e.style.minHeight||(e.style.minHeight=o),!e.getAttribute("data-lazy")){e.setAttribute("data-lazy","1");let s=new IntersectionObserver(i=>{i.forEach(r=>{if(e.setAttribute("data-lazy","2"),r.isIntersecting){s.disconnect();let a=h.get(e);a&&a.forEach(l=>l(r)),h.delete(e)}})},{root:t,rootMargin:window.innerHeight/2+"px"});s.observe(e),x(e,()=>{s.disconnect()})}})};function E(e){let n=Object.prototype.toString.call(e);if(n==="[object String]"||n==="[object Number]")return!0}function b(e){return Object.prototype.toString.call(e).indexOf("lement")>0}var S=e=>{let n=[];return e.forEach(o=>{Array.isArray(o)?n=n.concat(o):n.push(o)}),n};function F(e){return!!(e.__isSvg||e.tagName==="svg"||e.ownerSVGElement)}function H(e,n){return!!(v[n]||/-/.test(n)||F(e))}var v={autofocus:!0,role:!0,viewBox:!0};function _(e){let n=[];if(e)if(typeof e=="string"){let o="",t=e.split(", ");t.forEach((s,i)=>{s=s.trim(),i===t.length-1?o+=`${s}[bind-state], ${s} [bind-state]`:o+=`${s}[bind-state], ${s} [bind-state],`}),n=document.body.querySelectorAll(o)}else Object.prototype.toString.call(e)==="[object Array]"?(n=[...e],e.forEach(o=>{n.push(...o.querySelectorAll("*"))})):(n=[e],n.push(...e.querySelectorAll("*")));return n}var w=(e,n)=>{if(!e){console.error("aoife.next() need target");return}let o=_(n),t=_(e),s=t.length;for(let i=0;i<s;i++){let r=t[i];if(r.__bindState&&document.body.contains(r)){if(o.length){let a=o.length,l=!1;for(let c=0;c<a;c++){let y=o[c];if(y===r||y.contains(r)){l=!0;break}}if(l)continue}console.log("aaaaaa",r.__bindState),r.__bindState.forEach(a=>{a()})}}},T=(e,n,o)=>{if(n&&/^on/.test(n)){e[n]=o;return}if(typeof o!="function"){H(e,n)?e.setAttribute(n,o):typeof o=="object"?Object.assign(e[n],o):e[n]=o;return}e.__bindState||(e.setAttribute("bind-state",""),e.__bindState=new Map);let t;n===null?t=o:H(e,n)?t=()=>{Promise.resolve(o()).then(s=>{e.setAttribute(n,s)})}:t=()=>{Promise.resolve(o()).then(s=>{typeof s=="object"?Object.assign(e[n],s):e[n]=s})},t(),e.__bindState.set(n,t)};function M(e,n){e.isEqualNode(n)||e.replaceWith(n)}function O(e,n){if(!Array.isArray(e))return;e.filter(t=>t!=null).forEach((t,s)=>{if(E(t)){let i=document.createTextNode(t);i.key=s,n.append(i)}else if(typeof t=="function"){let i=document.createTextNode("");n.append(i);let r=async()=>{let a=await Promise.resolve(t());if(E(a)){let l=document.createTextNode(a);l.key=s;let c=!1;return n.childNodes.forEach(y=>{if(y.key===l.key){if(y.textContent===l.textContent){c=!0;return}M(y,l),c=!0}}),c||n.insertBefore(l,i),s}else if(Array.isArray(a)){let l={},c={};a.forEach((f,p)=>{f.___forList=s,f.key||(f.key=`fn(${s})-list(${p})`),c[f.key]=f});let y=[];return n.childNodes.forEach(f=>{f.___forList===s&&(c[f.key]?l[f.key]=f:y.push(f))}),y.forEach(f=>{f.remove()}),a.forEach(f=>{let p=l[f.key];p?p.isEqualNode(f)||M(p,f):f!==!1&&n.insertBefore(f,i)}),"for-list-"+s}else if(a){a.key||(a.key=s);let l=!1;return n.childNodes.forEach(c=>{c.key===a.key&&(M(c,a),l=!0)}),l||n.insertBefore(a,i),a.key}};r(),T(n,null,r)}else if(b(t))n.append(t);else if(t!==!1)if(Object.prototype.toString.call(t)==="[object Array]"){let i=[];for(let r=0;r<t.length;r++){let a=t[r];a!==!1&&i.push(a)}n.append(...i)}else n.appendChild(t)})}var j=new Set(["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]);var C={class:1,onAppend:1,onRemove:1,onEntry:1,children:1,length:1},k="http://www.w3.org/2000/svg",u=(e,n,...o)=>{let t={};if(n&&(typeof n=="function"||E(n)||b(n)?o=[n,...o]:Array.isArray(n)?o=[...n,...o]:t=n),o=S(o),(!t.children||!t.children.length)&&(t.children=[...o]),t.class&&(t.className=t.class,delete t.class),Array.isArray(e))return u(...e);let s;if(typeof e=="function"){if(s=e(t),s&&typeof s.then=="function"){let i=document.createElement("span");return i.setAttribute("promise-span",""),s.then(r=>{i.replaceWith(r)}),i}return s}if(typeof e=="string")if(e==="template"&&t.children){let i="";t.children.forEach(r=>{(typeof r=="string"||typeof r=="number")&&(i+=r)}),s=document.createElement("template"),s.innerHTML=i}else j.has(e)?(s=document.createElementNS(k,e),s.__isSvg=!0):s=document.createElement(e);else b(e)&&(s=e);return Object.keys(t).forEach(i=>{C[i]||T(s,i,t[i])}),O(t.children,s),typeof t.onAppend=="function"&&g(s,t.onAppend),typeof t.onRemove=="function"&&x(s,t.onRemove),typeof t.onEntry=="function"&&A(s,t.onEntry),s},N=e=>e&&e.children?u("span",{style:{all:"unset"}},...e.children):"";u.jsxFrag=N;u.next=w;u.attributeKeys=v;window.aoife=u;export{u as aoife,N as jsxFrag};
