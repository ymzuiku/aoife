var h=(t,n,f)=>new Promise((e,r)=>{var o=s=>{try{a(f.next(s))}catch(y){r(y)}},l=s=>{try{a(f.throw(s))}catch(y){r(y)}},a=s=>s.done?e(s.value):Promise.resolve(s.value).then(o,l);a((f=f.apply(t,n)).next())});import{onAppend as k,onRemove as T,onEntry as N}from"vanilla-life";function m(t){let n=Object.prototype.toString.call(t);if(n==="[object String]"||n==="[object Number]")return!0}function d(t){return Object.prototype.toString.call(t).indexOf("lement")>0}var b=t=>{let n=[];return t.forEach(f=>{Array.isArray(f)?n=n.concat(f):n.push(f)}),n};import{bindState as x}from"vanilla-ob";function E(t,n){t.isEqualNode(n)||t.replaceWith(n)}function A(t,n){if(!Array.isArray(t))return;t.filter(e=>e!=null).forEach((e,r)=>{if(m(e)){let o=document.createTextNode(e);o.key=r,n.append(o)}else if(typeof e=="function"){let o=document.createTextNode("");n.append(o);let l=()=>h(this,null,function*(){let a=yield Promise.resolve(e());if(m(a)){let s=document.createTextNode(a);s.key=r;let y=!1;return n.childNodes.forEach(p=>{if(p.key===s.key){if(p.textContent===s.textContent){y=!0;return}E(p,s),y=!0}}),y||n.insertBefore(s,o),r}else if(Array.isArray(a)){let s={},y={};a.forEach((i,u)=>{i.___forList=r,i.key||(i.key=`fn(${r})-list(${u})`),y[i.key]=i});let p=[];return n.childNodes.forEach(i=>{i.___forList===r&&(y[i.key]?s[i.key]=i:p.push(i))}),p.forEach(i=>{i.remove()}),a.forEach(i=>{let u=s[i.key];u?u.isEqualNode(i)||E(u,i):i!==!1&&n.insertBefore(i,o)}),"for-list-"+r}else if(a){a.key||(a.key=r);let s=!1;return n.childNodes.forEach(y=>{y.key===a.key&&(E(y,a),s=!0)}),s||n.insertBefore(a,o),a.key}});l(),x(n,null,l)}else if(d(e))n.append(e);else if(e!==!1)if(Object.prototype.toString.call(e)==="[object Array]"){let o=[];for(let l=0;l<e.length;l++){let a=e[l];a!==!1&&o.push(a)}n.append(...o)}else n.appendChild(e)})}import{bindState as g,nextState as S,attributeKeys as j}from"vanilla-ob";import{svgTags as H}from"vanilla-svg-tags";var L={class:1,onAppend:1,onRemove:1,onEntry:1,children:1,length:1},w="http://www.w3.org/2000/svg",c=(t,n,...f)=>{let e={};if(n&&(typeof n=="function"||m(n)||d(n)?f=[n,...f]:Array.isArray(n)?f=[...n,...f]:e=n),f=b(f),(!e.children||!e.children.length)&&(e.children=[...f]),e.class&&(e.className=e.class,delete e.class),Array.isArray(t))return c(...t);let r;if(typeof t=="function"){if(r=t(e),r&&typeof r.then=="function"){let o=document.createElement("span");return o.setAttribute("promise-span",""),r.then(l=>{o.replaceWith(l)}),o}return r}if(typeof t=="string")if(t==="template"&&e.children){let o="";e.children.forEach(l=>{(typeof l=="string"||typeof l=="number")&&(o+=l)}),r=document.createElement("template"),r.innerHTML=o}else H.has(t)?(r=document.createElementNS(w,t),r.__isSvg=!0):r=document.createElement(t);else d(t)&&(r=t);return Object.keys(e).forEach(o=>{L[o]||g(r,o,e[o])}),A(e.children,r),typeof e.onAppend=="function"&&k(r,e.onAppend),typeof e.onRemove=="function"&&T(r,e.onRemove),typeof e.onEntry=="function"&&N(r,e.onEntry),r},v=t=>t&&t.children?c("span",{style:{all:"unset"}},...t.children):"";c.jsxFrag=v;c.next=S;c.attributeKeys=j;window.aoife=c;export{c as aoife,v as jsxFrag};
