var h=(o,n,f)=>new Promise((e,t)=>{var r=s=>{try{a(f.next(s))}catch(y){t(y)}},l=s=>{try{a(f.throw(s))}catch(y){t(y)}},a=s=>s.done?e(s.value):Promise.resolve(s.value).then(r,l);a((f=f.apply(o,n)).next())});import{onAppend as T,onRemove as N,onEntry as g}from"vanilla-life";function m(o){let n=Object.prototype.toString.call(o);if(n==="[object String]"||n==="[object Number]")return!0}function d(o){return Object.prototype.toString.call(o).indexOf("lement")>0}var b=o=>{let n=[];return o.forEach(f=>{Array.isArray(f)?n=n.concat(f):n.push(f)}),n};import{bindState as k}from"vanilla-ob";function E(o,n){o.isEqualNode(n)||o.replaceWith(n)}function A(o,n){if(!Array.isArray(o))return;o.filter(e=>e!=null).forEach((e,t)=>{if(m(e)){let r=document.createTextNode(e);r.key=t,n.append(r)}else if(typeof e=="function"){let r=document.createTextNode("");n.append(r);let l=()=>h(this,null,function*(){let a=yield Promise.resolve(e());if(m(a)){let s=document.createTextNode(a);s.key=t;let y=!1;return n.childNodes.forEach(p=>{if(p.key===s.key){if(p.textContent===s.textContent){y=!0;return}E(p,s),y=!0}}),y||n.insertBefore(s,r),t}else if(Array.isArray(a)){let s={},y={};a.forEach((i,u)=>{i.___forList=t,i.key||(i.key=`fn(${t})-list(${u})`),y[i.key]=i});let p=[];return n.childNodes.forEach(i=>{i.___forList===t&&(y[i.key]?s[i.key]=i:p.push(i))}),p.forEach(i=>{i.remove()}),a.forEach(i=>{let u=s[i.key];u?u.isEqualNode(i)||E(u,i):i!==!1&&n.insertBefore(i,r)}),"for-list-"+t}else if(a){a.key||(a.key=t);let s=!1;return n.childNodes.forEach(y=>{y.key===a.key&&(E(y,a),s=!0)}),s||n.insertBefore(a,r),a.key}});l(),k(n,null,l)}else if(d(e))n.append(e);else if(e!==!1)if(Object.prototype.toString.call(e)==="[object Array]"){let r=[];for(let l=0;l<e.length;l++){let a=e[l];a!==!1&&r.push(a)}n.append(...r)}else n.appendChild(e)})}import{bindState as v,nextState as S,attributeKeys as j}from"vanilla-ob";import{svgTags as H}from"vanilla-svg-tags";var L={class:1,onUpdate:1,onAppend:1,onRemove:1,onEntry:1,children:1,length:1},w="http://www.w3.org/2000/svg",c=(o,n,...f)=>{let e={};if(n&&(typeof n=="function"||m(n)||d(n)?f=[n,...f]:Array.isArray(n)?f=[...n,...f]:e=n),f=b(f),(!e.children||!e.children.length)&&(e.children=[...f]),e.class&&(e.className=e.class,delete e.class),Array.isArray(o))return c(...o);let t;if(typeof o=="function"){if(t=o(e),t&&typeof t.then=="function"){let r=document.createElement("span");return r.setAttribute("promise-span",""),t.then(l=>{r.replaceWith(l)}),r}return t}if(typeof o=="string")if(o==="template"&&e.children){let r="";e.children.forEach(l=>{(typeof l=="string"||typeof l=="number")&&(r+=l)}),t=document.createElement("template"),t.innerHTML=r}else H.has(o)?(t=document.createElementNS(w,o),t.__isSvg=!0):t=document.createElement(o);else d(o)&&(t=o);return Object.keys(e).forEach(r=>{L[r]||v(t,r,e[r])}),A(e.children,t),typeof e.onUpdate=="function"&&v(t,null,e.onUpdate),typeof e.onAppend=="function"&&T(t,e.onAppend),typeof e.onRemove=="function"&&N(t,e.onRemove),typeof e.onEntry=="function"&&g(t,e.onEntry),t},x=o=>o&&o.children?c("span",{style:{all:"unset"}},...o.children):"";c.jsxFrag=x;c.next=S;c.attributeKeys=j;window.aoife=c;export{c as aoife,x as jsxFrag};
